{% extends "base.html" %}

{% block extra_js %}
<script>
    $(function(){
        $('.action').click(function(){
            $('#search-form').attr('action', $(this).data('url')).submit();
        })
    })
</script>
{% endblock %}

{% block content %}
    <div class="well">
        <div class="row">
          <div class="span8">
            <h4>Calculate the chance you will get a parking ticket at any address in San Francisco.</h4>
            <p>Or just find out what the parking laws are at any address. Based on public records of actual tickets.</p>

            <br>
            <form id="search-form" action="{% url "get-chance" %}">
                {{ form.text.label }}<br/>
                {{ form.text }}
                {% for error in form.text.errors %}
                    <span class="help-inline error-msg">{{ error }}</span>
                {% endfor %}
                <div class="row">
                    <div style="width: 30px; float: left;" class="hidden-phone">&nbsp;</div>
                    <div class="paramsinput">
                        {{ form.distance.label }}<br/>
                        {{ form.distance }}
                        {% for error in form.distance.errors %}
                            <span class="help-inline error-msg">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <div class="paramsinput">
                        {{ form.week_day.label }}<br/>
                        {{ form.week_day }}
                        {% for error in form.week_day.errors %}
                            <span class="help-inline error-msg">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <div class="paramsinput">
                        {{ form.from_time.label }}<br/>
                        {{ form.from_time }}
                        {% for error in form.from_time.errors %}
                            <span class="help-inline error-msg">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <div class="paramsinput">
                        {{ form.to_time.label }}<br/>
                        {{ form.to_time }}
                        {% for error in form.to_time.errors %}
                            <span class="help-inline error-msg">{{ error }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% for error in form.non_field_errors %}
                    <div class="alert alert-error"><a class="close" data-dismiss="alert">&times;</a></a>{{ error }}</div>
                {% endfor %}
            </form>
            <input id="chance-button" data-url="{% url "get-chance" %}" class="action btn btn-warning" type="submit" value="Chance of ticket" />
            <input id="laws-button" data-url="{% url "get-laws" %}" class="action btn btn-warning" type="submit" value="Tell me the laws" />
            <input id="heatmap-button" data-url="{% url "get-heatmap" %}" class="action btn btn-warning" type="submit" value="Heatmap" />
          </div>
          <div class="offset1 span2 hidden-phone">
            <img src="/static/no-parking.png">
          </div>
        </div>
    </div>

    <div class="row-fluid" id="output-block">{% block output %}{% endblock %}</div>
{% endblock %}